CREATE USER IF NOT EXISTS USER SALT '8ed0b20feb929adf' HASH '174bdf444ec151c12ad63a4f7a11525ba292ac4285df4e9ec045d8694f3822ae' ADMIN;

CREATE TABLE PUBLIC.LABORATOIRES( 
    ID INT NOT NULL, 
    NOM VARCHAR(255) NOT NULL, 
    RESPONSABLE VARCHAR(255) NOT NULL, 
    TEL VARCHAR(255) NOT NULL, 
    EMAIL VARCHAR(255) NOT NULL, 
    MOT_DE_PASSE VARCHAR(255) NOT NULL 
);

ALTER TABLE PUBLIC.LABORATOIRES ADD CONSTRAINT PUBLIC.CONSTRAINT_1 PRIMARY KEY(ID);

CREATE TABLE PUBLIC.ATELIERS( 
    ID INT NOT NULL, 
    LAB_ID INT NOT NULL, 
    TITRE VARCHAR(255) NOT NULL, 
    DISCIPLINES ARRAY NOT NULL, 
    TYPE VARCHAR(255) NOT NULL, 
    LIEU VARCHAR(255) NOT NULL, 
    DUREE INT NOT NULL, 
    CAPACITE INT NOT NULL, 
    RESUME VARCHAR(255) NOT NULL, 
    ANIMATEURS ARRAY NOT NULL, 
    PUBLICS ARRAY NOT NULL 
);

ALTER TABLE PUBLIC.ATELIERS ADD CONSTRAINT PUBLIC.CONSTRAINT_3 PRIMARY KEY(ID);

CREATE TABLE PUBLIC.SEANCES( 
    ID INT NOT NULL, 
    ATELIER_ID INT NOT NULL, 
    NOM VARCHAR(255) NOT NULL, 
    INSCRITS INT NOT NULL 
);

ALTER TABLE PUBLIC.SEANCES ADD CONSTRAINT PUBLIC.CONSTRAINT_A PRIMARY KEY(ID);

CREATE TABLE PUBLIC.TEACHERS( 
    ID INT NOT NULL, 
    NOM VARCHAR(255) NOT NULL, 
    ETABLISSEMENT VARCHAR(255) NOT NULL, 
    TEL VARCHAR(255) NOT NULL, 
    EMAIL VARCHAR(255) NOT NULL, 
    MOT_DE_PASSE VARCHAR(255) NOT NULL 
);

ALTER TABLE PUBLIC.TEACHERS ADD CONSTRAINT PUBLIC.CONSTRAINT_C PRIMARY KEY(ID);

CREATE TABLE PUBLIC.INSCRIPTIONS( 
    ID INT NOT NULL, 
    TEACHER_ID INT NOT NULL, 
    ATELIER_ID INT NOT NULL, 
    VALIDATED BOOLEAN NOT NULL, 
    SEANCE VARCHAR(255) NOT NULL, 
    PUBLIC VARCHAR(255) NOT NULL, 
    NOMBRE INT NOT NULL 
);

ALTER TABLE PUBLIC.INSCRIPTIONS ADD CONSTRAINT PUBLIC.CONSTRAINT_7 PRIMARY KEY(ID);

ALTER TABLE PUBLIC.INSCRIPTIONS ADD CONSTRAINT PUBLIC.CONSTRAINT_7A FOREIGN KEY(TEACHER_ID) REFERENCES PUBLIC.TEACHERS(ID) NOCHECK;
ALTER TABLE PUBLIC.SEANCES ADD CONSTRAINT PUBLIC.CONSTRAINT_A0 FOREIGN KEY(ATELIER_ID) REFERENCES PUBLIC.ATELIERS(ID) NOCHECK;
ALTER TABLE PUBLIC.INSCRIPTIONS ADD CONSTRAINT PUBLIC.CONSTRAINT_7A1 FOREIGN KEY(ATELIER_ID) REFERENCES PUBLIC.ATELIERS(ID) NOCHECK;
ALTER TABLE PUBLIC.ATELIERS ADD CONSTRAINT PUBLIC.CONSTRAINT_35 FOREIGN KEY(LAB_ID) REFERENCES PUBLIC.LABORATOIRES(ID) NOCHECK;